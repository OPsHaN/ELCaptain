<div class="container-fluid vh-100 landing position-relative">
  <!-- โ ูุจู ุชุณุฌูู ุงูุฏุฎูู -->
  <div *ngIf="!isLoggedIn" class="row h-100 full-bg">
    <div class="col-12 col-md-6 p-0 d-none d-md-block"></div>

    <div
      class="col-12 col-md-6 d-flex align-items-center justify-content-center"
    >
      <div
        class="left-box text-center p-4 w-100 login-box"
        style="max-width: 400px"
      >
        <img
          src="/photos/logo.png"
          alt="Logo"
          class="img-fluid m-0 w-50 w-md-75 w-lg-100"
        />

        <!-- <h2 class="mb-1">ุชุณุฌูู ุฏุฎูู</h2> -->

        <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">
          <div class="mb-3 text-end">
            <label class="form-label">ุงุณู ุงููุณุชุฎุฏู</label>
            <input
              type="text"
              formControlName="username"
              class="form-control"
              placeholder="ุงุณู ุงููุณุชุฎุฏู"
              dir="rtl"
            />
            <div
              *ngIf="
                loginForm.get('username')?.touched &&
                loginForm.get('username')?.invalid
              "
              class="text-danger small mt-1"
            >
              ุงุณู ุงููุณุชุฎุฏู ูุทููุจ
            </div>
          </div>

          <div class="mb-3 text-end position-relative">
            <label class="form-label">ูููุฉ ุงููุฑูุฑ</label>
            <input
              [type]="showPassword ? 'text' : 'password'"
              formControlName="password"
              class="form-control ps-5 text-end"
              placeholder="ูููุฉ ุงููุฑูุฑ"
              dir="rtl"
            />
            <button
              type="button"
              class="btn btn-link p-0 position-absolute top-50 start-0 translate-middle-x ms-3 mt-1"
              (click)="togglePassword()"
              tabindex="-1"
            >
              <i
                class="bi"
                [ngClass]="showPassword ? 'bi-eye-slash' : 'bi-eye'"
              ></i>
            </button>
            <div
              *ngIf="
                loginForm.get('password')?.touched &&
                loginForm.get('password')?.invalid
              "
              class="text-danger small mt-1"
            >
              ูููุฉ ุงููุฑูุฑ ูุทููุจุฉ
            </div>
          </div>

          <div class="d-grid">
            <button
              class="btn btn-warning btn-lg m-0 w-25 mx-auto py-0"
              type="submit"
            >
              ุฏุฎูู
            </button>
          </div>
        </form>
        <div class="mt-auto text-center pt-3 small opacity-75">
          ุฌููุน ุงูุญููู ูุญููุธุฉ ยฉ 2025 IT-Whale
        </div>
      </div>
    </div>
  </div>

  <!-- โ ุจุนุฏ ุชุณุฌูู ุงูุฏุฎูู -->
  <div *ngIf="isLoggedIn" class="row h-100">
    <!-- ๐ฆ ุงูุดูุงู -->
    <div
      class="col-12 col-md-9 d-flex align-items-center justify-content-center bg-white"
    >
      <div class="content text-center p-0 w-100 mb-auto">
        <router-outlet></router-outlet>
      </div>
    </div>

    <!-- ๐ง ุงููููู -->
    <div
      class="col-12 col-md-3 d-flex flex-column bg-side text-white p-3 justify-content-start align-content-start"
    >
      <h4 class="text-center mb-2 p-1 opacity-75 bg-dark rounded-pill">
        ุงููุงุจุชู ูุชุฌุงุฑุฉ ุงูุณูุงุฑุงุช
      </h4>
      <!-- ๐งโโ๏ธ ูุนูููุงุช ุงููุณุชุฎุฏู -->
      <div class="user-box text-center mb-3 w-50 mx-auto ">
        <!-- โ ูู ูู ุตูุฑุฉ -->
        <img
          *ngIf="userImg; else defaultIcon"
          [src]="userImg"
          alt="User Image"
          class="user-img rounded-circle my-1 w-50"
        />

        <!-- ๐ง ูู ูููุด ุตูุฑุฉ -->
        <ng-template #defaultIcon>
          <i class="bi bi-person-circle user-icon me-0"></i>
        </ng-template>
        <h6 class="user-name mb-0">{{ userFullName }}</h6>
        <small class="user-title text-warning fw-bold">ูุฏูุฑ ุงูุดุฑูุฉ</small>
      </div>
      <!-- ๐งโโ๏ธ ูุนูููุงุช ุงููุณุชุฎุฏู -->
      <!-- ๐ฆ ุฃุฒุฑุงุฑ ุงูุชููู -->
      <div
        class="buttons-grid d-flex flex-wrap justify-content-start"
        style="direction: rtl; gap: 12px"
      >
        <div
          *ngFor="let b of buttons"
          (click)="b.action ? b.action() : router.navigate([b.route])"
          class="button-item d-flex justify-content-center align-items-center"
        >
          <button
            class="btn d-flex flex-column align-items-center justify-content-center text-nowrap"
            [routerLink]="b.route"
            routerLinkActive="btn-light text-dark"
            [routerLinkActiveOptions]="{ exact: true }"
          >
            <i class="{{ b.icon }} mb-1 fs-5"></i>
            <span>{{ b.label }}</span>
          </button>
        </div>
      </div>
      <div class="mt-auto text-center small opacity-75 bg-dark rounded">
        ุฌููุน ุงูุญููู ูุญููุธุฉ ยฉ 2025 IT-Whale
      </div>
    </div>
  </div>
</div>
