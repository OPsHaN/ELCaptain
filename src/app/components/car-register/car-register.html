<div class="container py-1">
  <div class="row justify-content-center">
    <div class="col-12 col-lg-12 col-md-12 col-sm-12">
      <div class="card p-2 rounded-4">
        <div class="d-flex justify-content-between align-items-center mb-3">
          <div>
            <h3 class="text-center mb-2 fw-bold text-dark">
              {{ isEditMode ? "โ๏ธ ุชุนุฏูู ุณูุงุฑุฉ" : "๐ ุชุณุฌูู ุณูุงุฑุฉ" }}
            </h3>
          </div>
          <div>
            <button class="btn" (click)="closeForm.emit()">โฌ๏ธ ุบูู</button>
          </div>
        </div>

        <form [formGroup]="carForm" (ngSubmit)="onSubmit()" novalidate dir="rtl">
          <!-- ุตูุฑุฉ ุงูุณูุงุฑุฉ -->
          <div class="col-md-4 text-center my-2" style="width: 100px">
            <div class="avatar-upload">
              <img
                [src]="carImagePreview || defaultCarImage"
                alt="ุตูุฑุฉ ุงูุณูุงุฑุฉ"
                class="avatar-img"
              />
              <label for="carImageInput" class="edit-icon">โ๏ธ</label>
              <input
                type="file"
                id="carImageInput"
                accept="image/*"
                (change)="onFileSelected($event)"
              />
            </div>
          </div>

          <div class="row g-3 text-end">
            <!-- ููุน ุงูุณูุงุฑุฉ -->
            <div class="col-md-4">
              <label class="form-label">ููุน ุงูุณูุงุฑุฉ</label>
              <input
                type="text"
                class="form-control custom-input"
                formControlName="Type"
              />
            </div>

            <!-- ุงูููุฏูู -->
            <div class="col-md-4">
              <label class="form-label">ุงูููุฏูู</label>
              <input
                type="text"
                class="form-control custom-input"
                formControlName="Model"
              />
            </div>

            <!-- ุงููุงุฑูุฉ -->
            <div class="col-md-4">
              <label class="form-label">ุงููุงุฑูุฉ</label>
              <mat-form-field appearance="outline" class="w-100 custom-outline">
                <mat-select formControlName="BrandId">
                  <mat-option *ngFor="let brand of brands" [value]="brand.Id">
                    {{ brand.BrandName }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>

            <!-- ุงูููู -->
            <div class="col-md-4">
              <label class="form-label">ุงูููู</label>
              <input
                type="text"
                class="form-control custom-input"
                formControlName="Color"
              />
            </div>

            <!-- ุนุฏุฏ ุงููููููุชุฑุงุช -->
            <div class="col-md-4">
              <label class="form-label">ุนุฏุฏ ุงููููููุชุฑุงุช</label>
              <input
                type="text"
                class="form-control custom-input"
                formControlName="Kilometers"
              />
            </div>

            <!-- ูุงูู ุงูุญุฑูุฉ -->
            <div class="col-md-4">
              <label class="form-label">ูุงูู ุงูุญุฑูุฉ</label>
              <mat-form-field appearance="outline" class="w-100 custom-outline">
                <mat-select formControlName="Transmission">
                  <mat-option value="Manual">ูุฏูู</mat-option>
                  <mat-option value="Automatic">ุฃูุชููุงุชูู</mat-option>
                </mat-select>
              </mat-form-field>
            </div>

            <!-- ุงูุณุนุฑ -->
            <div class="col-md-4">
              <label class="form-label">ุงูุณุนุฑ</label>
              <input
                type="number"
                class="form-control custom-input"
                formControlName="Price"
              />
            </div>

            <!-- ุณูุฉ ุงูุตูุน -->
            <div class="col-md-4">
              <label class="form-label">ุณูุฉ ุงูุตูุน</label>
              <input
                type="number"
                class="form-control custom-input"
                formControlName="YearOfManufacture"
              />
            </div>

            <!-- ููุน ุงููุญุฑู -->
            <div class="col-md-4">
              <label class="form-label">ููุน ุงููุญุฑู</label>
              <input
                type="text"
                class="form-control custom-input"
                formControlName="EngineType"
              />
            </div>

            <!-- ููุฉ ุงูุญุตุงู -->
            <div class="col-md-4">
              <label class="form-label">ููุฉ ุงูุญุตุงู</label>
              <input
                type="text"
                class="form-control custom-input"
                formControlName="HorsePower"
              />
            </div>

            <!-- ุนุฏุฏ ุงููุณุงุฆุฏ ุงูููุงุฆูุฉ -->
            <div class="col-md-4">
              <label class="form-label">ุนุฏุฏ ุงููุณุงุฆุฏ ุงูููุงุฆูุฉ</label>
              <input
                type="text"
                class="form-control custom-input"
                formControlName="AirBagCount"
              />
            </div>

            <!-- ุณุนุฉ ุงูุดูุทุฉ -->
            <div class="col-md-4">
              <label class="form-label">ุณุนุฉ ุงูุดูุทุฉ</label>
              <input
                type="text"
                class="form-control custom-input"
                formControlName="BagCapacity"
              />
            </div>

            <!-- ุงูุญุงูุฉ -->
            <div class="col-md-4">
              <label class="form-label">ุงูุญุงูุฉ</label>
              <mat-form-field appearance="outline" class="w-100 custom-outline">
                <mat-select formControlName="Condition">
                  <mat-option value="New">ุฌุฏูุฏุฉ</mat-option>
                  <mat-option value="Used">ูุณุชุนููุฉ</mat-option>
                </mat-select>
              </mat-form-field>
            </div>

            <!-- โ ุงููููุฒุงุช -->
            <div class="col-12 mt-3">
              <label class="form-label d-block mb-2 fw-bold">ุงููููุฒุงุช</label>
              <div class="d-flex flex-wrap gap-3">
                <div *ngFor="let feature of features">
                  <input
                    type="checkbox"
                    class="form-check-input ms-1"
                    [formControlName]="feature.key"
                    [id]="feature.key"
                  />
                  <label [for]="feature.key">{{ feature.label }}</label>
                </div>
              </div>
            </div>

            <!-- ุฒุฑ ุงูุญูุธ -->
            <div class="col-12 text-center mt-3">
              <button class="btn btn-warning btn-lg py-0" [disabled]="isSubmitting">
                {{ isEditMode ? "๐ ุชุนุฏูู" : "โ ุชุณุฌูู" }}
              </button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
