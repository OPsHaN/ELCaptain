<!-- โ ุดุฑูุท ุงูุฃุฒุฑุงุฑ -->
<div
  class="toolbar d-flex flex-wrap justify-content-end gap-3 position-relative mt-2"
>
  <div class="position-relative">
    <button class="btn btn-outline-primary" (click)="toggleRegisterForm()">
      โ ุฅูุดุงุก ุตููุฉ ุฌุฏูุฏุฉ
    </button>
    <div class="arrow-wrapper" *ngIf="showRegisterForm">
      <i class="bi bi-caret-down-fill arrow-icon"></i>
    </div>
  </div>
</div>

<!-- โ ููุฑู ุชุณุฌูู ุงูุตููุฉ -->
<div class="table-container mt-0" *ngIf="showRegisterForm" dir="rtl">
  <app-register-deal
    *ngIf="showRegisterForm"
    [deal]="selectedDeal"
    [isEditMode]="isEditMode"
    (closeForm)="toggleRegisterForm()"
    (refreshDeals)="getAllDeals()"
  ></app-register-deal>
</div>

<!-- โ ุนุฑุถ ุงูุตููุงุช ุนูู ููุฆุฉ ูุฑูุช -->
<div class="deals-wrap" *ngIf="!showRegisterForm">
  <div class="container mt-4" dir="rtl">
<!-- <div class="row mb-4 mx-auto">
  <div class="col-12 text-center border rounded-3 px-0">
    <h3 class="fw-bold text-warning border-bottom py-2 ">
      ุงูุตููุงุช ุงูููุชุธุฑุฉ
    </h3>

    <div class="d-flex flex-wrap justify-content-start gap-3 my-3 mx-3">
      <div class="card p-2 border rounded shadow-sm" style="width: 220px;">
        <h6 class="fw-bold mb-1">ุตููุฉ ุฑูู 101</h6>
        <p class="mb-0 text-muted">ุนููู: ุฃุญูุฏ ุนูู</p>
      </div>

      <div class="card p-2 border rounded shadow-sm" style="width: 220px;">
        <h6 class="fw-bold mb-1">ุตููุฉ ุฑูู 102</h6>
        <p class="mb-0 text-muted">ุนููู: ูุญูุฏ ุญุณู</p>
      </div>

      <div class="card p-2 border rounded shadow-sm" style="width: 220px;">
        <h6 class="fw-bold mb-1">ุตููุฉ ุฑูู 103</h6>
        <p class="mb-0 text-muted">ุนููู: ุณุงุฑุฉ ุฅุจุฑุงููู</p>
      </div>

      <div class="card p-2 border rounded shadow-sm" style="width: 220px;">
        <h6 class="fw-bold mb-1">ุตููุฉ ุฑูู 104</h6>
        <p class="mb-0 text-muted">ุนููู: ููุณู ูุญููุฏ</p>
      </div>
    </div>
  </div>
</div> -->
  

    <!-- ๐ฅ ุงูุฃุนูุฏุฉ ุงูุฃุฑุจุนุฉ -->
    <div class="row g-4">
      <!-- ๐ข ููุชูุญุฉ -->
      <div class="col-md-3">
        <div class="card shadow-sm border-success">
          <div class="card-header bg-success text-white text-center fw-bold">
            ููุชูุญุฉ
          </div>
          <div class="card-body">
            <div class="mb-3 p-2 border rounded deal">
              <h6 class="fw-bold mb-1">ุตููุฉ ุฑูู 101</h6>
              <p class="mb-0 text-muted">ุนููู: ุฃุญูุฏ ุนูู</p>
            </div>
            <div class="mb-3 p-2 border rounded deal">
              <h6 class="fw-bold mb-1">ุตููุฉ ุฑูู 102</h6>
              <p class="mb-0 text-muted">ุนููู: ูุญูุฏ ุญุณู</p>
            </div>
          </div>
        </div>
      </div>

      <!-- ๐ด ูุฑููุถุฉ -->
      <div class="col-md-3">
        <div class="card shadow-sm border-danger">
          <div class="card-header bg-danger text-white text-center fw-bold">
            ูุฑููุถุฉ
          </div>
          <div class="card-body">
            <div class="mb-3 p-2 border rounded deal">
              <h6 class="fw-bold mb-1">ุตููุฉ ุฑูู 201</h6>
              <p class="mb-0 text-muted">ุนููู: ุฎุงูุฏ ููุณู</p>
            </div>
          </div>
        </div>
      </div>

      <!-- ๐ต ููุชููุฉ -->
      <div class="col-md-3">
        <div class="card shadow-sm border-primary">
          <div class="card-header bg-primary text-white text-center fw-bold">
            ููุชููุฉ
          </div>
          <div class="card-body">
            <div class="mb-3 p-2 border rounded deal">
              <h6 class="fw-bold mb-1">ุตููุฉ ุฑูู 301</h6>
              <p class="mb-0 text-muted">ุนููู: ูุงุณุฑ ูุญููุฏ</p>
            </div>
          </div>
        </div>
      </div>

      <!-- ๐ก ูุนููุฉ -->
      <div class="col-md-3">
        <div class="card shadow-sm border-warning">
          <div class="card-header bg-warning text-dark text-center fw-bold">
            ูุนููุฉ
          </div>
          <div class="card-body">
            <div class="mb-3 p-2 border rounded deal">
              <h6 class="fw-bold mb-1">ุตููุฉ ุฑูู 401</h6>
              <p class="mb-0 text-muted">ุนููู: ูุงุทูุฉ ูุญูุฏ</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- โ Dialog ุนุฑุถ ุจูุงูุงุช ุงูุตููุฉ -->
<p-dialog
  header="๐ ุชูุงุตูู ุงูุตููุฉ"
  [(visible)]="showDealDialog"
  [modal]="true"
  [closable]="true"
  [style]="{ width: '400px' }"
  [baseZIndex]="10000"
  dir="rtl"
>
  <ng-container *ngIf="selectedDeal">
    <div class="text-center p-1">
      <h4>{{ selectedDeal.DealName }}</h4>
      <p>๐ ุงูุญุงูุฉ: {{ selectedDeal.Status }}</p>
      <hr />
      <p><strong>๐ค ุงูุนููู:</strong> {{ selectedDeal.ClientName }}</p>
      <p>
        <strong>๐ฐ ุงููููุฉ:</strong> {{ selectedDeal.Amount | number }}
        {{ selectedDeal.Currency }}
      </p>
      <p>
        <strong>๐ ุชุงุฑูุฎ ุงูุฅูุดุงุก:</strong>
        {{ selectedDeal.CreatedAt | date : "mediumDate" }}
      </p>
      <p>
        <strong>๐ณ ุทุฑููุฉ ุงูุฏูุน:</strong>
        {{ getPaymentMethod(selectedDeal.PaymentMethod) }}
      </p>
      <p><strong>๐ ุงูุฏููุฉ:</strong> {{ selectedDeal.CountryName }}</p>
      <p><strong>๐ ุงูููุงุญุธุงุช:</strong> {{ selectedDeal.Notes }}</p>
    </div>
  </ng-container>
</p-dialog>

<p-confirmDialog></p-confirmDialog>
