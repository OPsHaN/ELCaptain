<div class="container-fluid py-3">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <div class="position-relative">
      <button class="btn btn-primary btn-sm" (click)="markAsRead()">
        ูุฑุงุกุฉ ุงููู
      </button>
    </div>
    <!-- ๐น ุงูุชุจููุจุงุช ุจุฏู ุงูุนููุงู -->
    <div class="flex-grow-1 text-center" dir="rtl">
      <mat-tab-group
        [(selectedIndex)]="selectedTabIndex"
        animationDuration="300ms"
        class="d-inline-block w-auto"
      >
        <mat-tab label="๐ ุงูุฅุดุนุงุฑุงุช"></mat-tab>

        <mat-tab label="โฐ ุงูุชุฐููุฑุงุช"></mat-tab>
      </mat-tab-group>
    </div>

    <div class="position-relative">
      <button class="btn btn-primary btn-sm" (click)="toggleAddReminder()">
        <i class="bi bi-plus-circle"></i> ุฅุถุงูุฉ ุชุฐููุฑ
      </button>

      <!-- ๐ฝ ุงูุณูู ุฃุณูู ุงูุฒุฑุงุฑ -->
      <i *ngIf="showAddReminder" class="bi bi-caret-down-fill arrow-icon"></i>
    </div>
  </div>

  <!-- ูููุฐุฌ ุฅุถุงูุฉ ุชุฐููุฑ -->
  <div *ngIf="showAddReminder" class="card p-3 my-4 border-0" dir="rtl">
    <form [formGroup]="addReminderForm" (ngSubmit)="addReminder()">
      <div class="row g-2 align-items-center">
        <div class="col-md-6 my-auto text-end">
          <label>ุงูููุช ู ุงูุชุงุฑูุฎ</label>
          <input
            type="datetime-local"
            class="form-control my-1"
            formControlName="ValidFrom"
            style="height: 62px"
          />
        </div>

        <div class="col-md-6">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>๐ฌ ุงูุฑุณุงูุฉ</mat-label>
            <textarea
              matInput
              formControlName="NotificationText"
              placeholder="ุงูุชุจ ุงูุชุฐููุฑ ููุง"
              rows="3"
            ></textarea>
          </mat-form-field>
        </div>
      </div>

      <div class="text-end mt-3">
        <button class="btn btn-success btn-sm" type="submit">๐พ ุญูุธ</button>

        <button
          class="btn btn-outline-secondary btn-sm mx-2"
          type="button"
          (click)="toggleAddReminder()"
        >
          ุฅูุบุงุก
        </button>
      </div>
    </form>
  </div>

  <!-- ูุงุฆูุฉ ุงูุฅุดุนุงุฑุงุช -->
  <!-- <div *ngIf="(notifications$ | async)?.length; else noNotifications" dir="rtl">
  <div class="list-group">
    <div
      *ngFor="let n of (notifications$ | async) || []"
      class="list-group-item list-group-item-action d-flex justify-content-between align-items-start border-0 shadow-sm mb-2 rounded-3"
    >
      <div class="ms-2 ms-auto">
        <div class="fw-bold">{{ n.NotificationText }}</div>
        <small class="text-muted">
          <ng-container *ngIf="n.OperationId && n.OperationId !== 0">
            ุนูู ุตููุฉ ุฑูู {{ n.OperationId }}
          </ng-container>
          {{ n.Message }}
        </small>
      </div>
      <span class="badge bg-primary rounded-pill">
        {{ n.ValidFrom | date : "short" }}
      </span>
    </div>
  </div>
</div> -->

  <ng-container [ngSwitch]="selectedTabIndex">

       <!-- ๐ ุชุจููุจ ุงูุฅุดุนุงุฑุงุช -->
    <div *ngSwitchCase="0">
      <div *ngIf="(notifications$ | async)?.length; else noNotifications" dir="rtl">
  <div class="list-group">
    <div
      *ngFor="let n of (notifications$ | async) || []"
      class="list-group-item list-group-item-action d-flex justify-content-between align-items-start border-0 shadow-sm mb-2 rounded-3"
    >
      <div class="ms-2 ms-auto">
        <div class="fw-bold">{{ n.NotificationText }}</div>
        <small class="text-muted">
          <ng-container *ngIf="n.OperationId && n.OperationId !== 0">
            ุนูู ุตููุฉ ุฑูู {{ n.OperationId }}
          </ng-container>
          {{ n.Message }}
        </small>
      </div>
  <div class="d-flex justify-content-between align-items-center mt-2">
    <span class="badge bg-primary rounded-pill">
      {{ n.ValidFrom | date : "short" }}
    </span>
    <button class="btn btn-sm btn-danger rounded-pill mx-2 py-0" (click)="remove(n.Id)">
      ๐ 
    </button>
  </div>
    </div>
  </div>
      </div>

      <ng-template #noNotifications>
        <div class="alert alert-light text-center border rounded-3">
          ูุง ุชูุฌุฏ ุฅุดุนุงุฑุงุช ุญุงููุงู ๐ด
        </div>
      </ng-template>
    </div>
    <!-- โฐ ุชุจููุจ ุงูุชุฐููุฑุงุช -->
    <div *ngSwitchCase="1">
      <div *ngIf="(reminders$ | async)?.length; else noReminders" dir="rtl">
    <div class="list-group">
    <div
      *ngFor="let n of (reminders$ | async) || []"
      class="list-group-item list-group-item-action d-flex justify-content-between align-items-start border-0 shadow-sm mb-2 rounded-3"
    >
      <div class="ms-2 ms-auto">
        <div class="fw-bold">{{ n.NotificationText }}</div>
        <small class="text-muted">
          <ng-container *ngIf="n.OperationId && n.OperationId !== 0">
            ุนูู ุตููุฉ ุฑูู {{ n.OperationId }}
          </ng-container>
          {{ n.Message }}
        </small>
      </div>
  <div class="d-flex justify-content-between align-items-center mt-2">
    <span class="badge bg-primary rounded-pill">
      {{ n.ValidFrom | date : "short" }}
    </span>
    <button class="btn btn-sm btn-danger rounded-pill mx-2 py-0" (click)="remove(n.Id)">
      ๐ 
    </button>
  </div>

    </div>
  </div>
      </div>

      <ng-template #noReminders>
        <div class="alert alert-light text-center border rounded-3">
          ูุง ุชูุฌุฏ ุชุฐููุฑุงุช ุญุงููุงู ๐ด
        </div>
      </ng-template>
    </div>

 
  </ng-container>
</div>
